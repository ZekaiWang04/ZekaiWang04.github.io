<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <title>CS 180 Project 1: Images of the Russian Empire -- Colorizing the Prokudin-Gorskii Photo Collection</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
  rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" type="text/javascript"></script>
  <script src="twentytwenty-master/js/jquery.event.move.js" type="text/javascript"></script>
  <script src="twentytwenty-master/js/jquery.twentytwenty.js" type="text/javascript"></script>
  <link rel="stylesheet" href="twentytwenty-master/css/twentytwenty.css" type="text/css" media="screen" />

</head>
<body>

å
  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">
              Images of the Russian Empire: <br>
              Colorizing the Prokudin-Gorskii Photo Collection</h1>
            <div class="is-size-5 publication-authors">
              <!-- Paper authors -->
              <span class="author-block">
                <a href="mailto:zekai.wang@berkeley.edu" target="_blank">Zekai Wang</a></span>
                <span class="author-block">
                  </div>

                  <div class="is-size-5 publication-authors">
                    <span class="author-block">UC Berkeley<br>CS 180 Fall 2024 Project 1</span>
                  </div>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Paper abstract -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Project Overview</h2>
        <div class="content has-text-justified">
          <p>
            Sergei Mikhailovich Prokudin-Gorskii (Сергей Михайлович Прокудин-Горский) was an early pinoeer in photography. In 1907, he began a project to document the Russian Empire using color photography. Specifically, he took photographs of the same scene with a red, a green and a blue filter. However, matching the three images requires some nontrivial effort. Since the specifics of his camera is unknown and the objects might be dynamic, we cannot simply align the images together. In this project, I use a multiscale pyramid approach that matches the RBG images based on the NCC similarity score. For Bells & Whistles, I experimented with using the edges (detected through the Canny edge detector) instead of the raw pixels to improve the matching. My final implementation successfully aligns the images and takes about a minute for the large .tif images. 
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End paper abstract -->


<!-- Plates -->
<section class="section hero"></section>
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Raw Data: Glass Plates</h2>
        <div class="content has-text-justified">
          <p>
            The Library of Congress purchased and digitized the raw glass plates from Prokudin-Gorskii's collection. The plates are vertically oriented, with blue filter on the top, green filter in the middle, and red filter on the bottom. These plates are the raw data that I used. Below are a few examples.
          </p>
          <figure>
            <img src="static/images/raw_plates.png"/>
            <figcaption>Raw glass plates, from left to right: Lady, Emir, Icon</figcaption>
          </figure>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End Plates -->

<!-- Naive Method -->
<section class="section hero"></section>
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Brute Force Matching</h2>
        <div class="content has-text-justified">
          <p>
            For smaller (~300 x 300) images, brute force matching is feasible. When doing brute force matching, I first cut out the raw plates into BGR parts and crop 10% of each edge respectively (to prevent any effect the edges have). Afterwards, I heuristically align the R and G channels to the B channel. To do this, I define a search window (e.g. 40), shift the offsets of the R channel relative to the B channel from negative to positive search window in both height and width, and calculate their respective similarity score. The choice of the similarity score significantly affects the matching quality, and I find that the Normalized Cross Correlation (NCC) is better than L2 norm. Then, I find the offsets that maximize the similarity score and apply that to aligh the R channel to the B channel. The same procedure is applied to align the G channel to the B channel. For visualizations, I keep the common areas of the aligned and unaligned images before heuristically cutting out 5% of each edge. The unaligned images are simply stacking the BGR channels together. 
          </p>
        </div>
      </div>
    </div>
    <figure style="display: flex; flex-direction: column; align-items: center;">
      <img src="static/images/teaser_naive.png" style="max-width: 150%; height: auto;"/>
      <figcaption style="font-style: italic;">Illustration of the pipeline, only matching red to green is shown for clarity</figcaption>
    </figure>
  </div>


</section>
<!-- End Naive Method -->

<div id="container1">
  <!-- The before image is first -->
  <img src="static/images/cathedral_unaligned.png" />
  <!-- The after image is last -->
  <img src="static/images/cathedral_aligned.png" />
</div>

<div id="container2">
  <!-- The before image is first -->
  <img src="static/images/monastery_unaligned.png" />
  <!-- The after image is last -->
  <img src="static/images/monastery_aligned.png" />
</div>

<div id="container3">
  <!-- The before image is first -->
  <img src="static/images/tobolsk_unaligned.png" />
  <!-- The after image is last -->
  <img src="static/images/tobolsk_aligned.png" />
</div>


<section class="section hero"></section>
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Pyramid</h2>
        <div class="content has-text-justified">
          <p>
            ... (teaser)
          </p>
        </div>
      </div>
    </div>
    <figure style="display: flex; flex-direction: column; align-items: center;">
      <img src="static/images/teaser_naive.png" style="max-width: 150%; height: auto;"/>
      <figcaption style="font-style: italic;">Illustration of the pipeline, only matching red to green is shown for clarity</figcaption>
    </figure>
  </div>

results
</section>

<section class="section hero"></section>
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Bell and Whistles</h2>
        <div class="content has-text-justified">
          <p>
            ... (teaser)
          </p>
        </div>
      </div>
    </div>
    <figure style="display: flex; flex-direction: column; align-items: center;">
      <img src="static/images/teaser_naive.png" style="max-width: 150%; height: auto;"/>
      <figcaption style="font-style: italic;">Illustration of the pipeline, only matching red to green is shown for clarity</figcaption>
    </figure>
  </div>

results
</section>

cut margins!
<!-- Image carousel -->
<section class="hero is-small">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Gallery of Aligned Photo</h2>
        <div class="content has-text-justified">
          <p>
            This is a gallery of all the images aligned using the Canny Edge Detector as described in the previous section. The optimal offsets and the runtime (on a I7 13700K 64GB RAM Ubuntu 20.04 workstation) are also shown. We can see that the average runtime is about one minute.
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel">
        <div class="item">
          <img src="static/images/final_results/cathedral_aligned.png"/>
          <h2 class="subtitle has-text-centered">
            Cathedral Aligned
            <br>
            Optimal offsets: R: (-12, -3), G: (-5, -2)
            <br>
            Runtime: 0.3s
          </h2>
        </div>
        <div class="item">
          <img src="static/images/final_results/church_aligned.png"/>
          <h2 class="subtitle has-text-centered">
            Cathedral Aligned
            <br>
            Optimal offsets: R: (-58, 4), G: (-24, -4)
            <br>
            Runtime: 53.9s
          </h2>
        </div>
        <div class="item">
          <img src="static/images/final_results/emir_aligned.png"/>
          <h2 class="subtitle has-text-centered">
            Cathedral Aligned
            <br>
            Optimal offsets: R: (-107, -40), G: (-49, -24)
            <br>
            Runtime: 53.7s
          </h2>
        </div>
        <div class="item">
          <img src="static/images/final_results/harvesters_aligned.png"/>
          <h2 class="subtitle has-text-centered">
            Cathedral Aligned
            <br>
            Optimal offsets: R: (-124, -14), G: (-60, -18)
            <br>
            Runtime: 54.0s
          </h2>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End image carousel -->



<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">

          <p>
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a> which was adopted from the <a href="https://nerfies.github.io" target="_blank">Nerfies</a> project page.
            You are free to borrow the source code of this website, we just ask that you link back to this page in the footer. <br> This website is licensed under a <a rel="license"  href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative
            Commons Attribution-ShareAlike 4.0 International License</a>.
          </p>

        </div>
      </div>
    </div>
  </div>
</footer>

 
<!-- Statcounter tracking code -->
  
<!-- You can add a tracker to track page visits by creating an account at statcounter.com -->

    <!-- End of Statcounter Code -->
  </body>
  </html>
  <script>
  $(function(){
    $("#container1").twentytwenty({
      default_offset_pct: 0.5,
      orientation: 'horizontal', 
      before_label: 'Unaligned',
      after_label: 'Aligned',
      no_overlay: true,
      move_slider_on_hover: false,
      move_with_handle_only: true, 
      click_to_move: false
    });
    $("#container2").twentytwenty({
      default_offset_pct: 0.5,
      orientation: 'horizontal', 
      before_label: 'Unaligned',
      after_label: 'Aligned',
      no_overlay: true,
      move_slider_on_hover: false,
      move_with_handle_only: true, 
      click_to_move: false
    });
    $("#container3").twentytwenty({
      default_offset_pct: 0.5,
      orientation: 'horizontal', 
      before_label: 'Unaligned',
      after_label: 'Aligned',
      no_overlay: true,
      move_slider_on_hover: false,
      move_with_handle_only: true, 
      click_to_move: false
    });
  });
  </script>